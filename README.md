# ุฑุงูููุง ุฌุงูุน ุงุณุชูุงุฏู ุงุฒ ูุฑุฏูพุฑุณ ุจู ุนููุงู Headless CMS ุจุฑุง Next.js

ุงู ุฑุงูููุง ุจู ุฒุจุงู ุณุงุฏู ุดูุง ุฑุง ุฏุฑ ุชูุงู ูุฑุงุญู ุฑุงูโุงูุฏุงุฒ ูุฑุฏูพุฑุณ ุจู ุนููุงู ฺฉ ููุจุน ูุญุชูุง (CMS) ู ุงุชุตุงู ุขู ุจู ฺฉ ูุจโุณุงุช ูุฏุฑู ฺฉู ุจุง Next.js ุณุงุฎุชู ุดุฏูุ ููุฑุงู ูโฺฉูุฏ. ุฏุฑ ุงู ูุนูุงุฑุ ูุฑุฏูพุฑุณ ูพูู ูุฏุฑุช ูุฏุฑุชููุฏ ุดูุง ุฎูุงูุฏ ุจูุฏ ู Next.js ูุธูู ููุงุด ุณุงุช ุจู ฺฉุงุฑุจุฑุงู ุฑุง ุจุง ุจุงูุงุชุฑู ุณุฑุนุช ุจุฑ ุนูุฏู ุฎูุงูุฏ ุฏุงุดุช.

## ููุฑุณุช ูุทุงูุจ

- [ฺุฑุง ุงุฒ ุงู ูุนูุงุฑ ุงุณุชูุงุฏู ฺฉููุ](#ฺุฑุง-ุงุฒ-ุงู-ูุนูุงุฑ-ุงุณุชูุงุฏู-ฺฉูู)
- [ูพุดโูุงุฒูุง](#ูพุดโูุงุฒูุง)
- [ฺฏุงู ฑ: ูุตุจ ู ุชูุธูุงุช ุงููู ูุฑุฏูพุฑุณ](#ฺฏุงู-ฑ-ูุตุจ-ู-ุชูุธูุงุช-ุงููู-ูุฑุฏูพุฑุณ)
- [ฺฏุงู ฒ: ุขุดูุง ุจุง API ูุฑุฏูพุฑุณ ู ุฑุงูููุง Endpoints](#ฺฏุงู-ฒ-ุขุดูุง-ุจุง-api-ูุฑุฏูพุฑุณ-ู-ุฑุงูููุง-endpoints)
- [ฺฏุงู ณ: ุณุงุฎุชุงุฑุฏู ูุญุชูุง ุณูุงุฑุด](#ฺฏุงู-ณ-ุณุงุฎุชุงุฑุฏู-ูุญุชูุง-ุณูุงุฑุด)
- [ฺฏุงู ด: ุงูุฒูุฏู ููุฏูุง ุฏูุฎูุงู ุจู API (ุจุฏูู ุงูุฒููู)](#ฺฏุงู-ด-ุงูุฒูุฏู-ููุฏูุง-ุฏูุฎูุงู-ุจู-api-ุจุฏูู-ุงูุฒููู)
- [ฺฏุงู ต: ุงููโุณุงุฒ ู ุงุญุฑุงุฒ ููุช](#ฺฏุงู-ต-ุงููโุณุงุฒ-ู-ุงุญุฑุงุฒ-ููุช)
- [ฺฏุงู ถ: ุงุชุตุงู Next.js ุจู ูุฑุฏูพุฑุณ](#ฺฏุงู-ถ-ุงุชุตุงู-nextjs-ุจู-ูุฑุฏูพุฑุณ)
- [ฺฏุงู ท: ูุฏุฑุช ฺฉุงุฑุจุฑุงู (ุซุจุชโูุงู ู ูุฑูุฏ)](#ฺฏุงู-ท-ูุฏุฑุช-ฺฉุงุฑุจุฑุงู-ุซุจุชโูุงู-ู-ูุฑูุฏ)
- [ฺฏุงู ธ: ุจูููโุณุงุฒ ุจุฑุง ุณุฑุนุช ู ููุชูุฑูุง ุฌุณุชุฌู (SEO)](#ฺฏุงู-ธ-ุจูููโุณุงุฒ-ุจุฑุง-ุณุฑุนุช-ู-ููุชูุฑูุง-ุฌุณุชุฌู-seo)
- [ฺฏุงู น: ุขูุงุฏูโุณุงุฒ ุจุฑุง ุงูุชุดุงุฑ ููุง](#ฺฏุงู-น-ุขูุงุฏูโุณุงุฒ-ุจุฑุง-ุงูุชุดุงุฑ-ููุง)

---

## ๐๏ธ ฺุฑุง ุงุฒ ุงู ูุนูุงุฑ ุงุณุชูุงุฏู ฺฉููุ

ููุช ูุฑุฏูพุฑุณ ุฑุง ุงุฒ ุธุงูุฑ ุณุงุช ุฌุฏุง ูโฺฉูู (Headless)ุ ูุฒุงุง ุจุฒุฑฺฏ ุจู ุฏุณุช ูโุขุฑู:

- **ุณุฑุนุช ูููโุงูุนุงุฏู**: ุณุงุช ุดูุง ุจุง Next.js ุณุงุฎุชู ูโุดูุฏ ฺฉู ฺฉ ุงุฒ ุณุฑุนโุชุฑู ูุฑููุฑฺฉโูุง ูุจ ุงุณุช ู ุชุฌุฑุจู ฺฉุงุฑุจุฑ ุจูุชุฑ ุงุฑุงุฆู ูโุฏูุฏ.
- **ุงููุช ุจุดุชุฑ**: ูพูู ูุฏุฑุช ูุฑุฏูพุฑุณ ุดูุง ุงุฒ ุฏุฏ ุนููู ูพููุงู ูโูุงูุฏ ู ุงู ฺฉุงุฑ ุงููุช ุขู ุฑุง ุจู ุดุฏุช ุงูุฒุงุด ูโุฏูุฏ.
- **ุชฺฉููููฺ ูุฏุฑู**: ุดูุง ูโุชูุงูุฏ ุงุฒ ุฌุฏุฏุชุฑู ุงุจุฒุงุฑูุง ุฏูุง ุจุฑูุงููโููุณ ุจุฑุง ุณุงุฎุช ุธุงูุฑ ุณุงุช ุฎูุฏ ุงุณุชูุงุฏู ฺฉูุฏุ ุจุฏูู ุงูฺฉู ุจู ูุงูุจโูุง ูุฑุฏูพุฑุณ ูุญุฏูุฏ ุจุงุดุฏ.
- **ุงูุนุทุงูโูพุฐุฑ ุจุงูุง**: ูุญุชูุง ุดูุง ุงุฒ ุทุฑู ฺฉ API ุฏุฑ ุฏุณุชุฑุณ ุงุณุช ู ูโุชูุงูุฏ ุนูุงูู ุจุฑ ูุจโุณุงุชุ ุจุฑุง ุงูพูฺฉุดู ููุจุงู ุง ูุฑ ูพูุชูุฑู ุฏฺฏุฑ ุงุฒ ุขู ุงุณุชูุงุฏู ฺฉูุฏ.

---

## โ ูพุดโูุงุฒูุง

- ฺฉ ุฏุงููู ุง ุฒุฑุฏุงููู ุจุฑุง ูุตุจ ูุฑุฏูพุฑุณ (ูุซูุงู `api.yourdomain.com`).
- ูุนุงู ุจูุฏู SSL (ูพุฑูุชฺฉู https) ุฑู ุฏุงููู.
- ุฏุณุชุฑุณ ุจู ูุงุณุช (ูุงููุฏ cPanel).
- ุขุดูุง ุจุณุงุฑ ุงููู ุจุง ููุงูู ูุจ.

---

## ๐ ฺฏุงู ฑ: ูุตุจ ู ุชูุธูุงุช ุงููู ูุฑุฏูพุฑุณ

ุงุจุชุฏุง ูุฑุฏูพุฑุณ ุฑุง ุจู ุนููุงู ุงูุจุงุฑ ูุญุชูุง ุฎูุฏ ุขูุงุฏู ูโฺฉูู.

1. **ูุตุจ ูุฑุฏูพุฑุณ**:
   - ฺฉ ุฏุชุงุจุณ ุฏุฑ ูุงุณุช ุฎูุฏ ุจุณุงุฒุฏ.
   - ุขุฎุฑู ูุณุฎู ูุฑุฏูพุฑุณ ุฑุง ุงุฒ [ุณุงุช ุฑุณู](https://wordpress.org) ุฏุงูููุฏ ู ูุตุจ ฺฉูุฏ.
2. **ุชูุธูุงุช ุงููู**:
   - **ุขุฏุฑุณ ุณุงุช**: ุฏุฑ ูพุดุฎูุงู ูุฑุฏูพุฑุณ ุจู _ุชูุธูุงุช > ุนููู_ ุจุฑูุฏ ู ูุทูุฆู ุดูุฏ ุขุฏุฑุณ ุณุงุช ุจุง `https` ุดุฑูุน ูโุดูุฏ.
   - **ูพููุฏูุง ฺฉุชุง**: ุจู _ุชูุธูุงุช > ูพููุฏูุง ฺฉุชุง_ ุจุฑูุฏ ู ฺฏุฒูู "ูุงู ููุดุชู" ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ. ุงู ฺฉุงุฑ ุจุงุนุซ ูโุดูุฏ ุขุฏุฑุณโูุง API ุดูุง ุฎูุงูุง ู ุงุณุชุงูุฏุงุฑุฏ ุจุงุดูุฏ.
3. **ุชุณุช API**:
   - ุขุฏุฑุณ `https://api.yourdomain.com/wp-json` ุฑุง ุฏุฑ ูุฑูุฑฺฏุฑ ุฎูุฏ ุจุงุฒ ฺฉูุฏ.
   - ุงฺฏุฑ ฺฉ ุตูุญู ุจุง ูุชูโูุง ุฒุงุฏ ู ุณุงุฎุชุงุฑุงูุชู (JSON) ุฏุฏุฏุ ุนู API ุดูุง ูุนุงู ู ุขูุงุฏู ุงุณุช.

---

## ๐ก ฺฏุงู ฒ: ุขุดูุง ุจุง API ูุฑุฏูพุฑุณ ู ุฑุงูููุง Endpoints

API ูุฑุฏูพุฑุณ ุฏุฑูุงุฒู ุงุฑุชุจุงุท ุจู ุณุงุช Next.js ุดูุง ู ูุญุชูุง ูุฑุฏูพุฑุณ ุงุณุช. ุดูุง ุจุง ุงุฑุณุงู ุฏุฑุฎูุงุณุช ุจู ุขุฏุฑุณโูุง ูุดุฎุต (ฺฉู ุจู ุขููุง Endpoint ูโฺฏูู)ุ ุงุทูุงุนุงุช ุฑุง ุฏุฑุงูุช ุง ุงุฑุณุงู ูโฺฉูุฏ.

**ุณุงุฎุชุงุฑ ุงุตู ุขุฏุฑุณโูุง**: `https://api.yourdomain.com/wp-json/wp/v2/`

### ุฏุฑุงูุช ุงุทูุงุนุงุช (ุฏุฑุฎูุงุณุช GET)

- **ุฏุฑุงูุช ุขุฎุฑู ูพุณุชโูุง**: `/wp/v2/posts`
- **ุฏุฑุงูุช ุตูุญุงุช (Pages)**: `/wp/v2/pages`
- **ุฏุฑุงูุช ุฏุณุชูโุจูุฏโูุง (Categories)**: `/wp/v2/categories`

### ูพุงุฑุงูุชุฑูุง ฺฉุงุฑุจุฑุฏ ุจุฑุง ููุชุฑ ฺฉุฑุฏู ูุชุงุฌ

- ูุญุฏูุฏ ฺฉุฑุฏู ุชุนุฏุงุฏ ูุชุงุฌ: `/posts?per_page=5`
- ุฌุณุชุฌู: `/posts?search=ฺฉููู ฺฉูุฏ`
- ุฏุฑุงูุช ุงุทูุงุนุงุช ูุฑุชุจุท (ูุซู ุชุตูุฑ ุดุงุฎุต): `/posts?_embed` (ุจุณุงุฑ ููู ู ฺฉุงุฑุจุฑุฏ)

### ุงุฑุณุงู ู ูุฑุงุด ุงุทูุงุนุงุช (ุฏุฑุฎูุงุณุชโูุง POST, PUT, DELETE)

ุจุฑุง ุงู ุนููุงุช ุจุงุฏ ุงุญุฑุงุฒ ููุช ุดุฏู ุจุงุดุฏ (ุฏุฑ ฺฏุงู ต ุชูุถุญ ุฏุงุฏู ูโุดูุฏ).

- **ุงุฌุงุฏ ฺฉ ูพุณุช ุฌุฏุฏ (POST)**: ุจู `/wp/v2/posts` ุจุง ุจุฏูู JSON.
- **ุญุฐู ฺฉ ูพุณุช (DELETE)**: ุจู `/wp/v2/posts/123`.

---

## ๐๏ธ ฺฏุงู ณ: ุณุงุฎุชุงุฑุฏู ูุญุชูุง ุณูุงุฑุด

ูุฑุฏูพุฑุณ ุจู ุทูุฑ ูพุดโูุฑุถ ููุท "ููุดุชูโูุง" ู "ุจุฑฺฏูโูุง" ุฑุง ุฏุงุฑุฏ. ุงฺฏุฑ ุจุฎูุงูุฏ ููุน ูุญุชูุง ุฏฺฏุฑ ูุงููุฏ "ูพุฑูฺูโูุง"ุ "ุงุฎุจุงุฑ" ุง "ูุญุตููุงุช" ุฏุงุดุชู ุจุงุดุฏุ ุจุงุฏ ฺฉ **Custom Post Type** ุจุณุงุฒุฏ.

1. ุงูุฒููู **Custom Post Type UI (CPT UI)** ุฑุง ูุตุจ ู ูุนุงู ฺฉูุฏ.
2. ุฏุฑ ูพุดุฎูุงู ุจู ููู _CPT UI > Add/Edit Post Types_ ุจุฑูุฏ.
3. ฺฉ ููุน ูพุณุช ุฌุฏุฏ ุจุง ุดูุงุณูโุง ูุงููุฏ `project` ู ูุงู "ูพุฑูฺูโูุง" ุจุณุงุฒุฏ.
4. ุฏุฑ ุชูุธูุงุช ุขู:
   - ฺฏุฒูู `Show in REST API` ุฑุง ุฑู `True` ุชูุธู ฺฉูุฏ.
   - `REST API Base Slug` ุฑุง ุฑู `projects` ุชูุธู ฺฉูุฏ.

โ **ุชุจุฑฺฉ!** ุดูุง ฺฉ Endpoint ุฌุฏุฏ ุฏุฑ ุขุฏุฑุณ `/wp-json/wp/v2/projects` ุณุงุฎุชุฏ.

---

## โ๏ธ ฺฏุงู ด: ุงูุฒูุฏู ููุฏูุง ุฏูุฎูุงู ุจู API (ุจุฏูู ุงูุฒููู)

ูุฑุถ ฺฉูุฏ ุจุฑุง ูุฑ "ูพุฑูฺู" ูโุฎูุงูู ฺฉ ููุฏ "ููฺฉ ูพุฑูฺู" ุฏุงุดุชู ุจุงุดู. ุจุฑุง ุงู ฺฉุงุฑ ุงุฒ ูุงุจูุช ุฏุงุฎู ูุฑุฏูพุฑุณ ุจู ูุงู **Post Meta** ุงุณุชูุงุฏู ูโฺฉูู.

1. ูุงุฑุฏ ูุงุณุช ุฎูุฏ ุดูุฏ ู ูุงู `functions.php` ูุงูุจ ูุนุงู ูุฑุฏูพุฑุณ ุฎูุฏ ุฑุง ูพุฏุง ฺฉูุฏ.
2. ฺฉุฏ ุฒุฑ ุฑุง ุจู ุงูุชูุง ุงู ูุงู ุงุถุงูู ฺฉูุฏ:

```php
function register_project_meta_fields() {
    register_post_meta('project', 'project_link', array(
        'show_in_rest' => true, // ุงู ุฎุท ุจุงุนุซ ููุงุด ููุฏ ุฏุฑ API ูโุดูุฏ
        'single' => true,
        'type' => 'string',
        'auth_callback' => function() { // ุงุฌุงุฒู ุขูพุฏุช ููุฏ ุจู ฺฉุงุฑุจุฑุงู ุจุง ุฏุณุชุฑุณ ูุฑุงุด ูพุณุช
            return current_user_can('edit_posts');
        }
    ));
}
add_action('rest_api_init', 'register_project_meta_fields');
```

**ุงู ฺฉุฏ ฺู ฺฉุงุฑ ุงูุฌุงู ูโุฏูุฏุ**

- ฺฉ ููุฏ ุณูุงุฑุด ุจู ูุงู `project_link` ุจุฑุง ููุน ูพุณุช `project` ุชุนุฑู ูโฺฉูุฏ.
- ุจุง `show_in_rest => true`ุ ุจู ูุฑุฏูพุฑุณ ูโฺฏูุฏ ฺฉู ุงู ููุฏ ุฑุง ุฏุฑ ุฎุฑูุฌ API ููุงุด ุจุฏูุฏ.
- ุญุงูุง ููุช ฺฉ ูพุฑูฺู ุฑุง ุงุฒ ุทุฑู API ุฏุฑุงูุช ูโฺฉูุฏุ ฺฉ ุจุฎุด ุฌุฏุฏ ุจู ูุงู `meta` ุฎูุงูุฏ ุฏุฏ ฺฉู ุดุงูู `project_link` ุงุณุช.

---

## ๐ก๏ธ ฺฏุงู ต: ุงููโุณุงุฒ ู ุงุญุฑุงุฒ ููุช

ุงููุช API ุดูุง ุจุณุงุฑ ููู ุงุณุช. ุฏุฑ ุงู ุจุฎุดุ ุฑูุดโูุง ุงุญุฑุงุฒ ููุช ู ุชูุธูุงุช ุฏุณุชุฑุณ ุฑุง ุจุฑุฑุณ ูโฺฉูู.

### ุจุฎุด ต.ฑ: ุฑูุดโูุง ุงุญุฑุงุฒ ููุช

#### ฑ. ุฑูุฒ ุนุจูุฑ ุจุฑูุงูู (Application Password)

ุงู ุฑูุด ุจุฑุง ุงุฑุชุจุงุท ุณุฑูุฑ ุจู ุณุฑูุฑ (ุนู ุงุฑุชุจุงุท Next.js ุจุง ูุฑุฏูพุฑุณ) ุงุฏูโุขู ุงุณุช.

1. ุฏุฑ ูพุดุฎูุงู ูุฑุฏูพุฑุณุ ุจู _ฺฉุงุฑุจุฑุงู > ูพุฑููุงู_ ุจุฑูุฏ.
2. ุฏุฑ ุงูุชูุง ุตูุญูุ ุฏุฑ ุจุฎุด "Application Passwords"ุ ฺฉ ูุงู ุจุฑุง ุจุฑูุงูู ุฎูุฏ (ูุซูุงู `NextJS_Server`) ูุงุฑุฏ ฺฉูุฏ.
3. ฺฉ ุฑูุฒ ุนุจูุฑ ุฌุฏุฏ ุจู ุดูุง ููุงุด ุฏุงุฏู ูโุดูุฏ. ุงู ุฑูุฒ ุฑุง ฺฉูพ ู ุฏุฑ ุฌุง ุงูู ุฐุฎุฑู ฺฉูุฏ.
4. ุงู ุงุทูุงุนุงุช ุฑุง ุฏุฑ ูุงู `.env.local` ูพุฑูฺู Next.js ุฎูุฏ ูุฑุงุฑ ุฏูุฏ:

```plaintext
WP_API_URL="https://api.yourdomain.com/wp-json"
WP_APPLICATION_USER="your_admin_username"
WP_APPLICATION_PASSWORD="your-generated-password"
```

#### ฒ. ุชูฺฉู JWT (ุจุฑุง ูุฑูุฏ ฺฉุงุฑุจุฑุงู ุณุงุช)

ููุช ฺฉุงุฑุจุฑ ุฏุฑ ุณุงุช ุดูุง ูุงฺฏู ูโฺฉูุฏุ ุงุฒ ุงู ุฑูุด ุงุณุชูุงุฏู ูโฺฉูู.

1. ุงูุฒููู **JWT Authentication for WP REST API** ุฑุง ูุตุจ ฺฉูุฏ.
2. ฺฉ ฺฉูุฏ ูุฎู ุฏุฑ ูุงู `wp-config.php` ูุฑุฏูพุฑุณ ุฎูุฏ ุชุนุฑู ฺฉูุฏ:

```php
define('JWT_AUTH_SECRET_KEY', 'your-super-secret-key-that-is-long-and-random');
define('JWT_AUTH_CORS_ENABLE', true);
```

### ุจุฎุด ต.ฒ: ุชูุธู CORS (ุจุณุงุฑ ููู ุจุฑุง ุชูุณุนูโุฏููุฏฺฏุงู ูุฑุงูุชโุงูุฏ)

**CORS ฺุณุชุ** ุจู ุฒุจุงู ุณุงุฏูุ ูุฑูุฑฺฏุฑูุง ฺฉ ุณุงุณุช ุงููุช ุฏุงุฑูุฏ ฺฉู ุงุฌุงุฒู ููโุฏูุฏ ฺฉ ุณุงุช (`your-frontend.com`) ุจู ุฑุงุญุช ุงุฒ ฺฉ ุณุงุช ุฏฺฏุฑ (`api.yourdomain.com`) ุฏุงุฏู ุฏุฑุฎูุงุณุช ฺฉูุฏุ ูฺฏุฑ ุงูฺฉู ุณุงุช ุฏูู ุตุฑุงุญุชุงู ุงุฌุงุฒู ุฏุงุฏู ุจุงุดุฏ.

**ฺุฑุง ุจู ุขู ูุงุฒ ุฏุงุฑุฏุ** ฺูู ุจุฑูุงูู Next.js ุดูุง ฺฉู ุฑู `localhost:3000` (ุฏุฑ ุญู ุชูุณุนู) ุง `your-frontend.com` (ุจุนุฏ ุงุฒ ุงูุชุดุงุฑ) ุงุฌุฑุง ูโุดูุฏุ ฺฉ "ูุจุฏุฃ" ูุชูุงูุช ุงุฒ API ูุฑุฏูพุฑุณ ุดูุงุณุช. ุจุฏูู ุชูุธู CORSุ ุชูุงู ุฏุฑุฎูุงุณุชโูุง ุดูุง ุงุฒ ูุฑุงูุชโุงูุฏ ุจุง ุฎุทุง ููุงุฌู ุฎูุงูุฏ ุดุฏ.

#### ุจุฑุง ุณุฑูุฑ Apache (ุจุณุงุฑ ุฑุงุฌ)

ฺฉุฏ ุฒุฑ ุฑุง ุจู ูุงู `.htaccess` ุฏุฑ ูพูุดู ุฑุดู ูุฑุฏูพุฑุณ ุฎูุฏ ุงุถุงูู ฺฉูุฏ:

```apache
<IfModule mod_headers.c>
    # ุจู ุฏุงูููโูุง ูุดุฎุต ุงุฌุงุฒู ุฏุณุชุฑุณ ุจุฏู
    SetEnvIf Origin "https?://(www\.)?(your-frontend-domain\.com|localhost:3000)$" AccessControlAllowOrigin=$0
    Header add Access-Control-Allow-Origin %{AccessControlAllowOrigin}e env=AccessControlAllowOrigin
    Header set Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
    Header set Access-Control-Allow-Headers "Content-Type, Authorization"
</IfModule>
```

**ูฺฉุงุช ููู:**

- `your-frontend-domain\.com` ุฑุง ุจุง ุฏุงููู ุงุตู ุณุงุช Next.js ุฎูุฏ ุฌุงฺฏุฒู ฺฉูุฏ.
- `localhost:3000` ุจุฑุง ุงู ุงุณุช ฺฉู ุจุชูุงูุฏ ุฏุฑ ุณุณุชู ุฎูุฏุชุงู ุจู ุฑุงุญุช ุชูุณุนู ุฏูุฏ. ูุจู ุงุฒ ุงูุชุดุงุฑ ููุง ุงู ุจุฎุด ุฑุง ุญุฐู ฺฉูุฏ.

#### ุจุฑุง ุณุฑูุฑ Nginx

ุงฺฏุฑ ุงุฒ Nginx ุงุณุชูุงุฏู ูโฺฉูุฏุ ุจููฺฉ ุฒุฑ ุฑุง ุจู ูุงู ฺฉุงููฺฏ ุณุงุช ุฎูุฏ ุงุถุงูู ฺฉูุฏ:

```nginx
location / {
    if ($http_origin ~* (https?://(www\.)?your-frontend-domain\.com|https?://localhost:3000)) {
        add_header 'Access-Control-Allow-Origin' "$http_origin";
        add_header 'Access-Control-Allow-Methods' 'GET, POST, PUT, DELETE, OPTIONS';
        add_header 'Access-Control-Allow-Headers' 'Content-Type, Authorization';
    }
}
```

---

## ๐ ฺฏุงู ถ: ุงุชุตุงู Next.js ุจู ูุฑุฏูพุฑุณ

ุญุงูุง ุฏุฑ ูพุฑูฺู Next.jsุ ฺฉ ูุงู ูุฑฺฉุฒ ุจุฑุง ูุฏุฑุช ุชูุงู ุฏุฑุฎูุงุณุชโูุง ุจู ูุฑุฏูพุฑุณ ูโุณุงุฒู.

```javascript
// lib/api.js
const API_URL = process.env.WP_API_URL;

// ฺฉ ุชุงุจุน ุงุตู ุจุฑุง ุงุฑุณุงู ุฏุฑุฎูุงุณุชโูุง
async function fetchAPI(endpoint, options = {}) {
  const headers = { "Content-Type": "application/json" };

  const res = await fetch(`${API_URL}${endpoint}`, {
    method: options.method || "GET",
    headers,
    body: options.body ? JSON.stringify(options.body) : null,
    next: { revalidate: 60 }, // ฺฉุด ฺฉุฑุฏู ูุชุงุฌ ุจุฑุง ถฐ ุซุงูู
  });

  if (!res.ok) {
    console.error("ุฎุทุง ุฏุฑ ุงุฑุชุจุงุท ุจุง API ูุฑุฏูพุฑุณ");
    return null;
  }

  return res.json();
}

// ุชูุงุจุน ฺฉูฺฉ ุจุฑุง ุณุงุฏฺฏ ฺฉุงุฑ
export const getPosts = () => fetchAPI("/wp/v2/posts?_embed");
export const getPostBySlug = (slug) =>
  fetchAPI(`/wp/v2/posts?slug=${slug}&_embed`);
```

### ููุงุด ูพุณุชโูุง ุฏุฑ ฺฉ ุตูุญู:

```javascript
// app/blog/page.jsx
import Link from "next/link";
import { getPosts } from "@/lib/api";

export default async function BlogPage() {
  const posts = await getPosts();

  return (
    <div>
      <h1>ูุจูุงฺฏ</h1>
      {posts &&
        posts.map((post) => (
          <article key={post.id}>
            <h2>
              <Link href={`/blog/${post.slug}`}>{post.title.rendered}</Link>
            </h2>
            <div dangerouslySetInnerHTML={{ __html: post.excerpt.rendered }} />
          </article>
        ))}
    </div>
  );
}
```

---

## ๐ค ฺฏุงู ท: ูุฏุฑุช ฺฉุงุฑุจุฑุงู (ุซุจุชโูุงู ู ูุฑูุฏ)

ุจุง ุงุณุชูุงุฏู ุงุฒ **Route Handler**ูุง ุฏุฑ Next.jsุ ูโุชูุงูุฏ ูุฑูโูุง ุซุจุชโูุงู ู ูุฑูุฏ ุฑุง ูุฏุฑุช ฺฉูุฏ.

### ูุซุงู: API Route ุจุฑุง ูุฑูุฏ ฺฉุงุฑุจุฑ

```javascript
// app/api/auth/signin/route.js
import { NextResponse } from "next/server";
import { cookies } from "next/headers";

export async function POST(req) {
  const { username, password } = await req.json();

  const res = await fetch(`${process.env.WP_API_URL}/jwt-auth/v1/token`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ username, password }),
  });

  const data = await res.json();

  if (!res.ok) {
    return NextResponse.json(
      { error: "ูุงู ฺฉุงุฑุจุฑ ุง ุฑูุฒ ุนุจูุฑ ุงุดุชุจุงู ุงุณุช." },
      { status: 401 }
    );
  }

  // ุฐุฎุฑู ุชูฺฉู ุฏุฑ ฺฉูฺฉ ุงูู HttpOnly
  cookies().set("token", data.token, {
    httpOnly: true,
    secure: process.env.NODE_ENV === "production",
    sameSite: "strict",
    path: "/",
  });

  return NextResponse.json({ message: "ูุฑูุฏ ููููุชโุขูุฒ ุจูุฏ." });
}
```

---

## โก๏ธ ฺฏุงู ธ: ุจูููโุณุงุฒ ุจุฑุง ุณุฑุนุช ู ููุชูุฑูุง ุฌุณุชุฌู (SEO)

- **ฺฉุดูฺฏ (Caching)**: Next.js ุจู ุทูุฑ ุฎูุฏฺฉุงุฑ ูุชุงุฌ ุฏุฑุฎูุงุณุชโูุง ุฑุง ฺฉุด ูโฺฉูุฏ. ุงู ุนู ุณุงุช ุดูุง ุจุฑุง ุจุงุฒุฏุฏูุง ูฺฉุฑุฑ ุจู ุณุฑุนุช ุจุงุฑฺฏุฐุงุฑ ูโุดูุฏ.
- **ุจูููโุณุงุฒ ุชุตุงูุฑ**: ุงุฒ ฺฉุงููพูููุช `<Image>` ุฎูุฏ Next.js ุจู ุฌุง ุชฺฏ `<img>` ูุนููู ุงุณุชูุงุฏู ฺฉูุฏ. ุงู ฺฉุงููพูููุช ุชุตุงูุฑ ุฑุง ุจูููุ ูุดุฑุฏู ู ุจุง ุจุงุฑฺฏุฐุงุฑ ุชูุจู (Lazy-loading) ุงุฑุงุฆู ูโุฏูุฏ.
- **SEO**:
  - ุงูุฒููู **Yoast SEO** ุฑุง ุฏุฑ ูุฑุฏูพุฑุณ ูุตุจ ฺฉูุฏ.
  - ุนููุงู ู ุชูุถุญุงุช ูุชุง ุฑุง ุจุฑุง ูุฑ ุตูุญู ูุฏุฑุช ฺฉูุฏ ู ุงุฒ ุทุฑู API ุฏุฑุงูุช ฺฉุฑุฏู ู ุฏุฑ ุชฺฏ `<head>` ุณุงุช Next.js ูุฑุงุฑ ุฏูุฏ.

---

## ๐ฆ ฺฏุงู น: ุขูุงุฏูโุณุงุฒ ุจุฑุง ุงูุชุดุงุฑ ููุง

ูุจู ุงุฒ ุงูุชุดุงุฑ ุณุงุชุ ุงู ููุงุฑุฏ ุฑุง ุจุฑุฑุณ ฺฉูุฏ:

- **ุบุฑูุนุงู ฺฉุฑุฏู ุญุงูุช ุฏุจุงฺฏ**: ุฏุฑ ูุงู `wp-config.php`ุ ููุฏุงุฑ `WP_DEBUG` ุฑุง ุฑู `false` ุชูุธู ฺฉูุฏ.
- **ูุชุบุฑูุง ูุญุท**: ุงุทููุงู ุญุงุตู ฺฉูุฏ ฺฉู ุชูุงู ุงุทูุงุนุงุช ุญุณุงุณ (ูุงููุฏ ุฑูุฒ ุนุจูุฑ ุจุฑูุงูู) ุฏุฑ ูุชุบุฑูุง ูุญุท ุณุฑูุฑ ุดูุง (ูุซูุงู ุฏุฑ Vercel ุง Netlify) ุชูุธู ุดุฏูโุงูุฏ.
- **ูพุดุชุจุงูโฺฏุฑ (Backup)**: ููุดู ฺฉ ูุณุฎู ูพุดุชุจุงู ุงุฒ ุฏุชุงุจุณ ู ูุงูโูุง ูุฑุฏูพุฑุณ ุฎูุฏ ุฏุงุดุชู ุจุงุดุฏ.
- **ุญุฐู localhost ุงุฒ ุชูุธูุงุช CORS**: ุฏุณุชุฑุณ ุงุฒ `localhost` ุฑุง ุฏุฑ ูุงู `.htaccess` ุง ฺฉุงููฺฏ Nginx ุบุฑูุนุงู ฺฉูุฏ.
